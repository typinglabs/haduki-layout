# 活動ログ

## 日付

### 2025-12-06

制約をちゃんとコードに落とし込んでおいた方が後々良さそうなので、バリデーションの処理を書いておく。拗音の排他、濁音の排他、外来音の排他、シフトキーにの後置には配置しない、等色々ルールがある。半濁音に関するルールも増えたのでそれも実装する。

---

仕様に変えたい部分があるのでランダム生成処理の書き換えやローマ字テーブルの修正を行って確認する。ま行+濁点=ぱ行をやめて、は行+半濁点=ぱ行にしたい。頻度の少ないパ行のために単打を1つ潰すのはいただけないので、は行のマイナーかなは"ょ"後置シフトに配置して、"ゅ"後置シフトを半濁音にするなどして同置を達成したい。つまり、"ゅ"キーが半濁点を兼用するということ。

こうすると"ぴ"が打てなくなるので、ここだけは+半濁点=ぴ、みたいな例外を作る。一旦これでローマ字テーブルを実装して、ちゃんと打てるか確認してみよう。

修正してテストを実行すると落ちて、これはもっと前の修正から落ちてたっぽい。CIの必要性を感じたので設定しておきたい。

### 2025-12-05

昨日に引き続きローマ字テーブルエクスポートの処理を書いている。Codexを使うためにChatGPTProを契約した。bunの正しいセットアップと、テストを色々書いてもらっている。テスト大事、遠回りは近道。

### 2025-12-04

ローマ字テーブルにエクスポートする処理を書いている。テストを書きながらやった方が良さそうな気はするが、bunのテストの書き方しらないので面倒だ。Copilotを使っていて、コード生成より補完の方が自分で書いてある感じが好きだったのだが、利用制限に達してしまった。Proプラン（$10）に加入するか悩ましい。Codexも使ってみたいなと思っている。とりあえず腕力で書き上げることにして、中期的（アドカレ〆切が2週間後くらいなので、1週間単位くらい）な効率も考えつつ進めたい。

### 2025-12-03

配列の探索をする前に、条件を満たす配列をランダムに生成するプログラムを作成してみる。

---

ゃゅょに後置シフトのキーを配置するとローマ字テーブルがややこしくなることが分かった（月見草と同じ）ので、シンプルさを優先するためにとりあえずやめることにした。

濁音が26キーで、シフトキーが4つなので濁音になるかながピッタリはまる。ただ「に」「り」に配置した濁音になるかなは後置シフトではなく、通常シフトで入力しなければならなくなってしまった。

ヒートマップを見ながら配置をある程度調整したので、ローマ字テーブルを作成して実際に打ってみよう。

![ヒートマップ](./images/2025-12-03-heatmap.png)

ローマ字テーブルが完成した。まぁまぁシンプルにできた気がする。長音を中段に配置したくて、そうしようとすると`/`と`'`って同じくらいの打ちやすさというか手を下げなくても良い分`'`の方が若干打ちやすいので、32キーにするかは悩んでいる。そうするとシフトでしか押せないキーがマイナー拗音ちひみだけになるので、そうした方がいい気がする。

### 2025-12-02

アドカレに投稿することも考えて、ログを残しつつ2週間で配列を作ろうと思った。

作成する配列は「清濁同置、拗音同置、外来音同置」の月配列。月見草配列、月林檎配列、薙刀式などに影響を受けている。

ひとまず草案を作ってコンセプトは大まかに実現できることは分かったので、あとは配置を煮詰めていきたい。

やりたいことは、

- [x] 打鍵時間を見積もるモデルを作成する→最近やってて大体できた
- [ ] 配列の評価ができるようにする（kouyさんのデータをお借りする予定）
- [ ] ヒューリスティック探索について学ぶ→問題に対する効果的な向き合い方を習得したい

明日は条件を満たす配列をランダムに生成してみようと思う。そして近傍を作って、ひとまずは評価方法を打鍵効率にして探索がちゃんとできることを確認したい。そこまでやるのに3日くらいかかりそうな気配はある。また明日。
